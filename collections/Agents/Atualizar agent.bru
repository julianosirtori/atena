meta {
  name: Atualizar agent
  type: http
  seq: 3
}

put {
  url: {{baseUrl}}/api/v1/tenants/{{tenantId}}/agents/{{agentId}}
  body: json
  auth: none
}

body:json {
  {
    "name": "Carlos Silva",
    "isActive": true,
    "maxConcurrent": 15
  }
}

tests {
  test("status code é 200", function() {
    expect(res.getStatus()).to.equal(200);
  });

  test("data.id é string (UUID)", function() {
    const body = res.getBody();
    expect(body.data).to.have.property("id");
    expect(body.data.id).to.be.a("string");
  });

  test("campos atualizados refletidos na resposta", function() {
    const body = res.getBody();
    expect(body.data).to.have.property("name");
    expect(body.data).to.have.property("updatedAt");
  });
}

docs {
  # Atualizar agent

  Atualiza dados de um agente. Todos os campos são opcionais.

  ## Path params

  | Param | Tipo | Descrição |
  |-------|------|-----------|
  | `tenantId` | UUID | ID do tenant |
  | `agentId` | UUID | ID do agente |

  ## Body (todos opcionais)

  | Campo | Tipo | Validação |
  |-------|------|-----------|
  | `name` | string | Min 1 caractere |
  | `email` | string | E-mail válido |
  | `role` | enum | `admin` ou `agent` |
  | `isActive` | boolean | — |
  | `telegramChatId` | string \| null | — |
  | `maxConcurrent` | integer | 1–50 |
  | `notificationPreferences` | object | `telegram`, `web_push`, `sound` |

  ## Resposta (200)

  Retorna o agente atualizado.

  ## Erros

  | Código | Descrição |
  |--------|-----------|
  | `400` | Erro de validação |
  | `404` | Agente não encontrado |
}
