meta {
  name: Criar agent
  type: http
  seq: 2
}

post {
  url: {{baseUrl}}/api/v1/tenants/{{tenantId}}/agents
  body: json
  auth: none
}

body:json {
  {
    "name": "Novo Agente",
    "email": "novo@lojademo.com.br",
    "password": "senha123",
    "role": "agent",
    "maxConcurrent": 10,
    "notificationPreferences": {
      "telegram": true,
      "web_push": true,
      "sound": true
    }
  }
}

docs {
  # Criar agent

  Cria um novo agente para o tenant.

  ## Path params

  | Param | Tipo | Descrição |
  |-------|------|-----------|
  | `tenantId` | UUID | ID do tenant |

  ## Body

  | Campo | Tipo | Obrigatório | Validação |
  |-------|------|-------------|-----------|
  | `name` | string | **Sim** | Min 1 caractere |
  | `email` | string | **Sim** | E-mail válido |
  | `password` | string | **Sim** | Min 6 caracteres |
  | `role` | enum | Não | `admin` ou `agent` (default: `agent`) |
  | `telegramChatId` | string | Não | Chat ID do Telegram |
  | `maxConcurrent` | integer | Não | 1–50 (default: 10) |
  | `notificationPreferences` | object | Não | Ver abaixo |

  ### Estrutura de `notificationPreferences`

  | Campo | Tipo | Descrição |
  |-------|------|-----------|
  | `telegram` | boolean | Notificações via Telegram |
  | `web_push` | boolean | Notificações web push |
  | `sound` | boolean | Som nas notificações |

  ## Resposta (201)

  Retorna o agente criado com todos os campos.

  ```json
  {
    "data": {
      "id": "uuid",
      "tenantId": "uuid",
      "name": "Novo Agente",
      "email": "novo@lojademo.com.br",
      "role": "agent",
      "isActive": true,
      "isOnline": false,
      "maxConcurrent": 10,
      "activeConversations": 0,
      "createdAt": "2026-02-22T10:00:00.000Z",
      "updatedAt": "2026-02-22T10:00:00.000Z"
    }
  }
  ```

  ## Erros

  | Código | Descrição |
  |--------|-----------|
  | `400` | Erro de validação (campos obrigatórios, email inválido, etc.) |
  | `404` | Tenant não encontrado |
}
