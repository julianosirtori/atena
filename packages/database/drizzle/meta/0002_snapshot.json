{
  "id": "4d478078-77e0-4322-9a0c-476d93412a4e",
  "prevId": "1fdee82b-0eb8-444e-8096-aefd077529bc",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.agents": {
      "name": "agents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password_hash": {
          "name": "password_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "agent_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'agent'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_online": {
          "name": "is_online",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "max_concurrent": {
          "name": "max_concurrent",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "active_conversations": {
          "name": "active_conversations",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "telegram_chat_id": {
          "name": "telegram_chat_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notification_preferences": {
          "name": "notification_preferences",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"telegram\":true,\"web_push\":true,\"sound\":true}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agents_tenant_email": {
          "name": "idx_agents_tenant_email",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_agents_tenant": {
          "name": "idx_agents_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "agents_tenant_id_tenants_id_fk": {
          "name": "agents_tenant_id_tenants_id_fk",
          "tableFrom": "agents",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.campaigns": {
      "name": "campaigns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "campaign_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'other'"
        },
        "status": {
          "name": "status",
          "type": "campaign_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "start_date": {
          "name": "start_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "end_date": {
          "name": "end_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "auto_activate": {
          "name": "auto_activate",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "products_info": {
          "name": "products_info",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_info": {
          "name": "pricing_info",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "faq": {
          "name": "faq",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "custom_instructions": {
          "name": "custom_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fallback_message": {
          "name": "fallback_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "handoff_rules": {
          "name": "handoff_rules",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "utm_rules": {
          "name": "utm_rules",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "goal_leads": {
          "name": "goal_leads",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "goal_conversions": {
          "name": "goal_conversions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_campaigns_tenant": {
          "name": "idx_campaigns_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaigns_status": {
          "name": "idx_campaigns_status",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_campaigns_default": {
          "name": "idx_campaigns_default",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"campaigns\".\"is_default\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "campaigns_tenant_id_tenants_id_fk": {
          "name": "campaigns_tenant_id_tenants_id_fk",
          "tableFrom": "campaigns",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.conversation_notes": {
      "name": "conversation_notes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "agent_id": {
          "name": "agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notes_conversation": {
          "name": "idx_notes_conversation",
          "columns": [
            {
              "expression": "conversation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "conversation_notes_tenant_id_tenants_id_fk": {
          "name": "conversation_notes_tenant_id_tenants_id_fk",
          "tableFrom": "conversation_notes",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "conversation_notes_conversation_id_conversations_id_fk": {
          "name": "conversation_notes_conversation_id_conversations_id_fk",
          "tableFrom": "conversation_notes",
          "tableTo": "conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "conversation_notes_agent_id_agents_id_fk": {
          "name": "conversation_notes_agent_id_agents_id_fk",
          "tableFrom": "conversation_notes",
          "tableTo": "agents",
          "columnsFrom": [
            "agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.conversations": {
      "name": "conversations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "lead_id": {
          "name": "lead_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "channel": {
          "name": "channel",
          "type": "channel",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "conversation_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'ai'"
        },
        "assigned_agent_id": {
          "name": "assigned_agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "ai_messages_count": {
          "name": "ai_messages_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "human_messages_count": {
          "name": "human_messages_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "lead_messages_count": {
          "name": "lead_messages_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "first_response_time_ms": {
          "name": "first_response_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "ai_model": {
          "name": "ai_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'claude-sonnet-4-20250514'"
        },
        "ai_summary": {
          "name": "ai_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "handoff_reason": {
          "name": "handoff_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "handoff_at": {
          "name": "handoff_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "closed_at": {
          "name": "closed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_conversations_tenant": {
          "name": "idx_conversations_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_lead": {
          "name": "idx_conversations_lead",
          "columns": [
            {
              "expression": "lead_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_status": {
          "name": "idx_conversations_status",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversations_waiting": {
          "name": "idx_conversations_waiting",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "handoff_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"conversations\".\"status\" = 'waiting_human'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "conversations_tenant_id_tenants_id_fk": {
          "name": "conversations_tenant_id_tenants_id_fk",
          "tableFrom": "conversations",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "conversations_lead_id_leads_id_fk": {
          "name": "conversations_lead_id_leads_id_fk",
          "tableFrom": "conversations",
          "tableTo": "leads",
          "columnsFrom": [
            "lead_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "conversations_assigned_agent_id_agents_id_fk": {
          "name": "conversations_assigned_agent_id_agents_id_fk",
          "tableFrom": "conversations",
          "tableTo": "agents",
          "columnsFrom": [
            "assigned_agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.lead_campaigns": {
      "name": "lead_campaigns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "lead_id": {
          "name": "lead_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "matched_by": {
          "name": "matched_by",
          "type": "campaign_match_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "matched_at": {
          "name": "matched_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lead_campaigns_unique": {
          "name": "idx_lead_campaigns_unique",
          "columns": [
            {
              "expression": "lead_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lead_campaigns_campaign": {
          "name": "idx_lead_campaigns_campaign",
          "columns": [
            {
              "expression": "campaign_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lead_campaigns_lead": {
          "name": "idx_lead_campaigns_lead",
          "columns": [
            {
              "expression": "lead_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lead_campaigns_tenant_id_tenants_id_fk": {
          "name": "lead_campaigns_tenant_id_tenants_id_fk",
          "tableFrom": "lead_campaigns",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lead_campaigns_lead_id_leads_id_fk": {
          "name": "lead_campaigns_lead_id_leads_id_fk",
          "tableFrom": "lead_campaigns",
          "tableTo": "leads",
          "columnsFrom": [
            "lead_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lead_campaigns_campaign_id_campaigns_id_fk": {
          "name": "lead_campaigns_campaign_id_campaigns_id_fk",
          "tableFrom": "lead_campaigns",
          "tableTo": "campaigns",
          "columnsFrom": [
            "campaign_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.lead_events": {
      "name": "lead_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "lead_id": {
          "name": "lead_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "event_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "from_value": {
          "name": "from_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "to_value": {
          "name": "to_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lead_events_lead": {
          "name": "idx_lead_events_lead",
          "columns": [
            {
              "expression": "lead_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lead_events_tenant_id_tenants_id_fk": {
          "name": "lead_events_tenant_id_tenants_id_fk",
          "tableFrom": "lead_events",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lead_events_lead_id_leads_id_fk": {
          "name": "lead_events_lead_id_leads_id_fk",
          "tableFrom": "lead_events",
          "tableTo": "leads",
          "columnsFrom": [
            "lead_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.leads": {
      "name": "leads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "instagram_id": {
          "name": "instagram_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "channel": {
          "name": "channel",
          "type": "channel",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "utm_source": {
          "name": "utm_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "utm_medium": {
          "name": "utm_medium",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "utm_campaign": {
          "name": "utm_campaign",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stage": {
          "name": "stage",
          "type": "lead_stage",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'new'"
        },
        "score": {
          "name": "score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::text[]"
        },
        "assigned_to": {
          "name": "assigned_to",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "active_campaign_id": {
          "name": "active_campaign_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "pipeline_stage_id": {
          "name": "pipeline_stage_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "last_counted_month": {
          "name": "last_counted_month",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "first_contact_at": {
          "name": "first_contact_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "last_contact_at": {
          "name": "last_contact_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "converted_at": {
          "name": "converted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_leads_phone": {
          "name": "idx_leads_phone",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "phone",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"leads\".\"phone\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_instagram": {
          "name": "idx_leads_instagram",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "instagram_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"leads\".\"instagram_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_tenant": {
          "name": "idx_leads_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_stage": {
          "name": "idx_leads_stage",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "stage",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_score": {
          "name": "idx_leads_score",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "score",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_campaign": {
          "name": "idx_leads_campaign",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "utm_campaign",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"leads\".\"utm_campaign\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_leads_last_message": {
          "name": "idx_leads_last_message",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "last_message_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"leads\".\"last_message_at\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "leads_tenant_id_tenants_id_fk": {
          "name": "leads_tenant_id_tenants_id_fk",
          "tableFrom": "leads",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "leads_assigned_to_agents_id_fk": {
          "name": "leads_assigned_to_agents_id_fk",
          "tableFrom": "leads",
          "tableTo": "agents",
          "columnsFrom": [
            "assigned_to"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.messages": {
      "name": "messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "direction": {
          "name": "direction",
          "type": "message_direction",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "sender_type": {
          "name": "sender_type",
          "type": "sender_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "sender_agent_id": {
          "name": "sender_agent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content_type": {
          "name": "content_type",
          "type": "content_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'text'"
        },
        "media_url": {
          "name": "media_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_metadata": {
          "name": "ai_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "delivery_status": {
          "name": "delivery_status",
          "type": "delivery_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'sent'"
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "injection_flags": {
          "name": "injection_flags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::text[]"
        },
        "validation_result": {
          "name": "validation_result",
          "type": "validation_result",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'valid'"
        },
        "correlation_id": {
          "name": "correlation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_messages_conversation": {
          "name": "idx_messages_conversation",
          "columns": [
            {
              "expression": "conversation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_messages_tenant": {
          "name": "idx_messages_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_messages_correlation_id": {
          "name": "idx_messages_correlation_id",
          "columns": [
            {
              "expression": "correlation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "correlation_id IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "messages_tenant_id_tenants_id_fk": {
          "name": "messages_tenant_id_tenants_id_fk",
          "tableFrom": "messages",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "messages_conversation_id_conversations_id_fk": {
          "name": "messages_conversation_id_conversations_id_fk",
          "tableFrom": "messages",
          "tableTo": "conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "messages_sender_agent_id_agents_id_fk": {
          "name": "messages_sender_agent_id_agents_id_fk",
          "tableFrom": "messages",
          "tableTo": "agents",
          "columnsFrom": [
            "sender_agent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.monthly_lead_counts": {
      "name": "monthly_lead_counts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "year_month": {
          "name": "year_month",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lead_count": {
          "name": "lead_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "notified_80": {
          "name": "notified_80",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "notified_100": {
          "name": "notified_100",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_monthly_lead_counts_unique": {
          "name": "idx_monthly_lead_counts_unique",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "year_month",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "monthly_lead_counts_tenant_id_tenants_id_fk": {
          "name": "monthly_lead_counts_tenant_id_tenants_id_fk",
          "tableFrom": "monthly_lead_counts",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.pipeline_stages": {
      "name": "pipeline_stages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'#6B7280'"
        },
        "is_won": {
          "name": "is_won",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_lost": {
          "name": "is_lost",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_pipeline_stages_tenant": {
          "name": "idx_pipeline_stages_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pipeline_stages_position": {
          "name": "idx_pipeline_stages_position",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "pipeline_stages_tenant_id_tenants_id_fk": {
          "name": "pipeline_stages_tenant_id_tenants_id_fk",
          "tableFrom": "pipeline_stages",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scheduled_messages": {
      "name": "scheduled_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "lead_id": {
          "name": "lead_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "message_type": {
          "name": "message_type",
          "type": "message_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_for": {
          "name": "scheduled_for",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "scheduled_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled_reason": {
          "name": "cancelled_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_scheduled_pending": {
          "name": "idx_scheduled_pending",
          "columns": [
            {
              "expression": "scheduled_for",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"scheduled_messages\".\"status\" = 'pending'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "scheduled_messages_tenant_id_tenants_id_fk": {
          "name": "scheduled_messages_tenant_id_tenants_id_fk",
          "tableFrom": "scheduled_messages",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scheduled_messages_lead_id_leads_id_fk": {
          "name": "scheduled_messages_lead_id_leads_id_fk",
          "tableFrom": "scheduled_messages",
          "tableTo": "leads",
          "columnsFrom": [
            "lead_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "scheduled_messages_conversation_id_conversations_id_fk": {
          "name": "scheduled_messages_conversation_id_conversations_id_fk",
          "tableFrom": "scheduled_messages",
          "tableTo": "conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.security_incidents": {
      "name": "security_incidents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "lead_id": {
          "name": "lead_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "incident_type": {
          "name": "incident_type",
          "type": "incident_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "severity": {
          "name": "severity",
          "type": "severity",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'low'"
        },
        "lead_message": {
          "name": "lead_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_response": {
          "name": "ai_response",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "detection_layer": {
          "name": "detection_layer",
          "type": "detection_layer",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "action_taken": {
          "name": "action_taken",
          "type": "action_taken",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "resolved": {
          "name": "resolved",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "resolved_by": {
          "name": "resolved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_security_tenant": {
          "name": "idx_security_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_unresolved": {
          "name": "idx_security_unresolved",
          "columns": [
            {
              "expression": "tenant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"security_incidents\".\"resolved\" = false",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "security_incidents_tenant_id_tenants_id_fk": {
          "name": "security_incidents_tenant_id_tenants_id_fk",
          "tableFrom": "security_incidents",
          "tableTo": "tenants",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "security_incidents_conversation_id_conversations_id_fk": {
          "name": "security_incidents_conversation_id_conversations_id_fk",
          "tableFrom": "security_incidents",
          "tableTo": "conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "security_incidents_lead_id_leads_id_fk": {
          "name": "security_incidents_lead_id_leads_id_fk",
          "tableFrom": "security_incidents",
          "tableTo": "leads",
          "columnsFrom": [
            "lead_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "security_incidents_resolved_by_agents_id_fk": {
          "name": "security_incidents_resolved_by_agents_id_fk",
          "tableFrom": "security_incidents",
          "tableTo": "agents",
          "columnsFrom": [
            "resolved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.tenants": {
      "name": "tenants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "plan": {
          "name": "plan",
          "type": "plan",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'starter'"
        },
        "leads_limit": {
          "name": "leads_limit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 300
        },
        "agents_limit": {
          "name": "agents_limit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "business_name": {
          "name": "business_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "business_description": {
          "name": "business_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "products_info": {
          "name": "products_info",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pricing_info": {
          "name": "pricing_info",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "faq": {
          "name": "faq",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "business_hours": {
          "name": "business_hours",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payment_methods": {
          "name": "payment_methods",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "custom_instructions": {
          "name": "custom_instructions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fallback_message": {
          "name": "fallback_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "whatsapp_provider": {
          "name": "whatsapp_provider",
          "type": "whatsapp_provider",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'zapi'"
        },
        "whatsapp_config": {
          "name": "whatsapp_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "instagram_config": {
          "name": "instagram_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "telegram_bot_config": {
          "name": "telegram_bot_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "handoff_rules": {
          "name": "handoff_rules",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"score_threshold\":60,\"max_ai_turns\":15,\"business_hours_only\":false,\"handoff_intents\":[\"complaint\"],\"auto_handoff_on_price\":false,\"follow_up_enabled\":false,\"follow_up_delay_hours\":24}'::jsonb"
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "billing_status": {
          "name": "billing_status",
          "type": "billing_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'trial'"
        },
        "trial_ends_at": {
          "name": "trial_ends_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_tenants_slug": {
          "name": "idx_tenants_slug",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "tenants_slug_unique": {
          "name": "tenants_slug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.action_taken": {
      "name": "action_taken",
      "schema": "public",
      "values": [
        "blocked",
        "handoff",
        "generic_response"
      ]
    },
    "public.agent_role": {
      "name": "agent_role",
      "schema": "public",
      "values": [
        "admin",
        "agent"
      ]
    },
    "public.billing_status": {
      "name": "billing_status",
      "schema": "public",
      "values": [
        "trial",
        "active",
        "past_due",
        "cancelled"
      ]
    },
    "public.campaign_match_method": {
      "name": "campaign_match_method",
      "schema": "public",
      "values": [
        "utm",
        "manual",
        "default"
      ]
    },
    "public.campaign_status": {
      "name": "campaign_status",
      "schema": "public",
      "values": [
        "draft",
        "active",
        "paused",
        "completed"
      ]
    },
    "public.campaign_type": {
      "name": "campaign_type",
      "schema": "public",
      "values": [
        "launch",
        "promotion",
        "recurring",
        "evergreen",
        "other"
      ]
    },
    "public.channel": {
      "name": "channel",
      "schema": "public",
      "values": [
        "whatsapp",
        "instagram"
      ]
    },
    "public.content_type": {
      "name": "content_type",
      "schema": "public",
      "values": [
        "text",
        "image",
        "audio",
        "video",
        "document"
      ]
    },
    "public.conversation_status": {
      "name": "conversation_status",
      "schema": "public",
      "values": [
        "ai",
        "waiting_human",
        "human",
        "closed"
      ]
    },
    "public.delivery_status": {
      "name": "delivery_status",
      "schema": "public",
      "values": [
        "queued",
        "sent",
        "delivered",
        "read",
        "failed"
      ]
    },
    "public.detection_layer": {
      "name": "detection_layer",
      "schema": "public",
      "values": [
        "sanitization",
        "prompt",
        "validation"
      ]
    },
    "public.event_type": {
      "name": "event_type",
      "schema": "public",
      "values": [
        "stage_change",
        "score_change",
        "assigned",
        "unassigned",
        "tag_added",
        "tag_removed",
        "handoff",
        "follow_up_sent",
        "converted",
        "lost",
        "reopened",
        "campaign_joined",
        "campaign_completed",
        "pipeline_stage_moved",
        "automation_triggered"
      ]
    },
    "public.incident_type": {
      "name": "incident_type",
      "schema": "public",
      "values": [
        "injection_attempt",
        "prompt_leak",
        "off_topic",
        "over_promise",
        "validation_failed",
        "identity_leak"
      ]
    },
    "public.lead_stage": {
      "name": "lead_stage",
      "schema": "public",
      "values": [
        "new",
        "qualifying",
        "hot",
        "human",
        "converted",
        "lost"
      ]
    },
    "public.message_direction": {
      "name": "message_direction",
      "schema": "public",
      "values": [
        "inbound",
        "outbound"
      ]
    },
    "public.message_type": {
      "name": "message_type",
      "schema": "public",
      "values": [
        "follow_up",
        "reminder",
        "campaign"
      ]
    },
    "public.plan": {
      "name": "plan",
      "schema": "public",
      "values": [
        "starter",
        "pro",
        "scale"
      ]
    },
    "public.scheduled_status": {
      "name": "scheduled_status",
      "schema": "public",
      "values": [
        "pending",
        "sent",
        "cancelled",
        "failed"
      ]
    },
    "public.sender_type": {
      "name": "sender_type",
      "schema": "public",
      "values": [
        "lead",
        "ai",
        "agent",
        "system"
      ]
    },
    "public.severity": {
      "name": "severity",
      "schema": "public",
      "values": [
        "low",
        "medium",
        "high",
        "critical"
      ]
    },
    "public.validation_result": {
      "name": "validation_result",
      "schema": "public",
      "values": [
        "valid",
        "blocked",
        "modified"
      ]
    },
    "public.whatsapp_provider": {
      "name": "whatsapp_provider",
      "schema": "public",
      "values": [
        "zapi",
        "meta_cloud"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}